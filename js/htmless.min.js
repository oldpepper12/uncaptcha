"use strict";Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}),Object.prototype.entries=function(){return Object.entries(this)};class HLElement{constructor(e,t=[]){this.classes=[],this.attrs={},this.children=[],this.tagName=e,this.children=t,this.eventListeners=[]}setAttr(e,t=!0){return this.attrs[e]=t,this}onEvent(e,t,n=!0){return this.eventListeners.push({type:e,callback:t,capture:n}),this}id(e){return this.setAttr("id",e)}contentEditable(e=!0){return this.setAttr("contenteditable",e)}draggable(e=!0){return this.setAttr("draggable",e)}spellcheck(e){return this.setAttr("spellcheck",e)}style(e){return this.setAttr("style",e)}class(e){return e&&this.classes.push(e),this}italicized(){return new HLElement("em",[this])}strikethrough(){return new HLElement("s",[this])}bold(){return new HLElement("strong",[this])}superscripted(){return new HLElement("sup",[this])}subscripted(){return new HLElement("sub",[this])}onClick(e){return this.onEvent("click",e),this}render(){let e=document.createElement(this.tagName);this.classes.length>0&&e.classList.add(...this.classes);for(let[t,n]of this.attrs.entries())e.setAttribute(t,n);for(let t of this.children){let n=htmless.valueToNode(t);e.appendChild(n)}for(let t of this.eventListeners)e.addEventListener(t.type,t.callback,t.capture);return e}}class HTMLess{constructor(){this.trackedNodes=new Map,this.inlineComponents={},this.inlineComponentLabels={}}renderComponent(e){let t=this.valueToNode(e.body());if(t instanceof DocumentFragment)throw new Error("For simplicity, component bodies cannot be document fragments (a node representing multiple elements). Try encapsulating it inside a div");return this.trackedNodes.set(t,e),t}inlineComponent(e,t){let n=new InlineComponent(t);return n.body=e,this.inlineComponents[t]=n,n}getInlineComponent(e){let t=this.inlineComponents[e];if(void 0===t)throw new Error("No inline component with id '"+e+"' exists");return t}getInlineComponentsByLabel(e){let t=this.inlineComponentLabels[e];if(void 0===t)throw new Error("No such label '"+e+"' exists");return t.map(e=>this.getInlineComponent(e))}rerenderComponent(e){let t=[];for(let[n,r]of this.trackedNodes.entries())e===r&&t.push(n);for(let n of t){this.trackedNodes.delete(n);let t=e.body().render();n.replaceWith(t),this.trackedNodes.set(t,e)}for(let e of this.trackedNodes.keys())document.contains(e)||this.trackedNodes.delete(e)}rerenderInlineComponent(e){this.rerenderComponent(this.getInlineComponent(e))}rerender(e){e instanceof Component?this.rerenderComponent(e):this.rerenderInlineComponent(e)}rerenderLabel(e){let t=this.getInlineComponentsByLabel(e);for(let e of t)this.rerender(e)}valueToNode(e){if("object"!=typeof e)return document.createTextNode(e);if(e instanceof Component){return htmless.renderComponent(e)}if(e instanceof Array){let t=document.createDocumentFragment();for(let n of e)t.appendChild(this.valueToNode(n));return t}if(e.render)return e.render();throw new Error("Invalid child type")}labelComponent(e,t){if(!(e instanceof InlineComponent))throw new Error("Cannot label non-inline component");this.inlineComponentLabels[t]?this.inlineComponentLabels[t].push(e.id):this.inlineComponentLabels[t]=[e.id]}}function elementFunction(e,t=HLElement){return(...n)=>new t(e,n)}let inlineHTML=function(e){return new InlineHTMLElement(e)},div=elementFunction("div"),span=elementFunction("span"),hr=new HLElement("hr"),paragraph=elementFunction("p"),hyperlink=function(...e){return new HLHyperlinkElement("a",e)},headers={h1:elementFunction("h1"),h2:elementFunction("h2"),h3:elementFunction("h3"),h4:elementFunction("h4"),h5:elementFunction("h5"),h6:elementFunction("h6")},newline=new HLElement("br"),smallText=elementFunction("small"),superscript=elementFunction("sup"),subscript=elementFunction("sub"),codeBlock=elementFunction("code"),image=function(e){return new HLImageElement(e)},video=function(){return new HLVideoElement},button=elementFunction("button"),input={text:()=>new HLTextField("text"),numeric:()=>new HLTextField("number"),email:()=>new HLTextField("email"),password:()=>new HLTextField("password"),search:()=>new HLTextField("search"),phoneNumber:()=>new HLTextField("tel"),url:()=>new HLTextField("url"),checkbox:()=>new HLInputElement("checkbox"),radio:()=>new HLInputElement("radio"),date:()=>new HLInputElement("date"),datetimeLocal:()=>new HLInputElement("datetime-local"),month:()=>new HLInputElement("month"),week:()=>new HLInputElement("week"),file:()=>new HLFileUpload,color:()=>new HLInputElement("color")},htmless=new HTMLess;class Component{body(){throw new Error("No render method specified for this component")}render(){return htmless.renderComponent(this)}}class InlineComponent extends Component{constructor(e){super(),this.id=e}label(e){return htmless.labelComponent(this,e),this}}Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}),Object.prototype.entries=function(){return Object.entries(this)};class HLInputElement extends HLElement{constructor(e){super("input",[]),this.attrs.type=e}disabled(e=!0){return this.setAttr("disabled",e)}readonly(e=!0){return this.setAttr("readonly",e)}placeholder(e){return this.setAttr("placeholder",e)}autocomplete(e=!0){return this.setAttr("autocomplete",e)}name(e){return this.setAttr("name",e)}initialValue(e){return this.setAttr("value",e)}}class HLDateField extends HLInputElement{constructor(){super("checkbox")}}class HLFileUpload extends HLInputElement{constructor(){super("file")}allowedFileTypes(e){return this.setAttr("accept",e.join(","))}multiple(e=!0){return this.setAttr("multiple",e)}capture(e){return this.setAttr("capture",e)}}class HLTextField extends HLInputElement{constructor(e){super(e)}maxlength(e){return this.setAttr("maxlength",e)}minlength(e){return this.setAttr("minlength",e)}min(e){return this.setAttr("min",e)}max(e){return this.setAttr("max",e)}pattern(e){return this.setAttr("pattern",e)}multiple(e=!0){return this.setAttr("multiple",e)}size(e){return this.setAttr("size",e)}}class InlineHTMLElement{constructor(e){this.content=e}render(){var e=document.createElement("template");return e.innerHTML=this.content,e.content}}class HLImageElement extends HLElement{constructor(e){super("img"),this.setAttr("src",e)}alt(e){return this.setAttr("alt",e)}crossorigin(e){return this.setAttr("crossorigin",e)}decoding(e){return this.setAttr("decoding",e)}height(e){return this.setAttr("height",e)}width(e){return this.setAttr("width",e)}loading(e){return this.setAttr("loading",e)}}class HLVideoElement extends HLElement{constructor(){super("video")}autoplay(){return this.setAttr("autoplay")}controls(){return this.setAttr("autoplay")}width(e){return this.setAttr("width",e)}height(e){return this.setAttr("height",e)}loop(){return this.setAttr("loop")}muted(){return this.setAttr("muted")}poster(e){return this.setAttr("poster",e)}src(e){return this.setAttr("src",e)}}class HLHyperlinkElement extends HLElement{href(e){return this.setAttr("href",e)}download(e){return this.setAttr("download",e)}target(e){return this.setAttr("target",e)}}